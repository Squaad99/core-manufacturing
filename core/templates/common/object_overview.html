{% extends "core/base.html" %}
{% block content %}

<script>
$(document).ready(function(){
  $("#myInput").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#object-table tbody tr").filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    });
  });
});

jQuery(document).ready(function($) {
    $(".clickable-row").click(function() {
        window.location = $(this).data("href");
    });
});
</script>

<div class="content-section">
    <h1 class="d-inline">{{ header }} - översikt</h1>
    {% with url_name|add:"-create" as url_path %}
    <a class="nav-item nav-link float-right" href="{% url url_path %}">Skapa</a>
    {% endwith %}
    <div class="border-top mt-3 mb-3"></div>

    <input type="text" class="form-control w-25 mb-2" id="myInput" placeholder="Sök" style="font-size: 10pt">

    <table id="object-table" class="table table-striped table-bordered table-hover"
           style="width:100%; overflow-y: scroll;">
        <thead>
        <tr>
            <td width="60%">Titel</td>
            <td width="20%">Av</td>
            <td width="20%">Datum</td>
        </tr>
        </thead>
        <tbody style="overflow-y: scroll; max-height:400pt;">
        {% for object in object_list %}
        {% with url_name|add:"-detail" as url_path %}
        <tr class="clickable-row p-1" style="cursor: pointer" data-href="{% url url_path object.id %}">
            <td>{{ object.title }}</td>
            <td style="font-size: 10pt;">{{ object.created_by.first_name }} {{ object.created_by.last_name }}</td>
            <td style="font-size: 10pt;">{{ object.created_at|date:'Y-m-d H:i' }}</td>
        </tr>
        {% endwith %}
        {% endfor %}
    </table>
</div>

{% endblock %}